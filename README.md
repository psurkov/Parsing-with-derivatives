# Пример использования библиотеки `parsec`

Собирать проект при помощи [`stack`](https://docs.haskellstack.org/en/stable/README/). 
Он сам поставит подходящую версию ghc и необходимые зависимости (первый раз может занять младшие десятки минут).
Основные команды: 

* `stack build` -- сборка 

* `stack run main` -- запуск исполняемого файла `main`

* `stack test` -- запуск юнит-тестов

* `stack ghci` -- запуск `ghci` со всеми зависимостями из проекта, подгружает исполнимый Main 

Файл [package.yaml](package.yaml) конфигурирует проект.

В разделе `dependencies` зависимости всего проекта. 

Раздел `library` содержит описание библиотеки, сейчас там как папка с исходным кодом указана папка [src](src), поэтому можно спокойно добавлять файлы в эту папку и они будут включены в библиотеку. 

Раздел `executables` описывает испольнимые файлы. 
Их может быть несколько, но сейчас это [Main.hs](app/Main.hs) в папке [app](app). 

Раздел `tests` описывает тесты, их тоже может быть много. 
Сейчас все так настроено, что будут запускаться все тесты, которые находятся в папке [test/Test/](test/Test). 
Имя тестирующей функции должно начинаться на `unit_`. 
Обратите внимание, что имя модуля с тестом должно начинаться на `Test.`, потому что они живут в подпапке. 

Рекомендую пользоваться [ghcid](https://hackage.haskell.org/package/ghcid) при разработке: оно автоматически при сохранении файла быстро пересобирает проект и может запустить тесты. 
Это существенно сокращает время обратной связи и повышает скорость разработки. 

* `ghcid --command 'stack ghci' --test main` -- в случае удачной сборки запустит `main`


Чтобы тесты автоматически перезапускались при сохранении файла, можно использовать команду `stack test --file-watch --fast`


